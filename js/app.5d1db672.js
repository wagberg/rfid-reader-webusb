(function(e){function t(t){for(var n,i,u=t[0],s=t[1],o=t[2],h=0,f=[];h<u.length;h++)i=u[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,o||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,u=1;u<r.length;u++){var s=r[u];0!==a[s]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},c=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/rfid-reader-webusb/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var l=s;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=(r("5363"),r("98c5"),r("afc9")),c=r("81c6"),i=r("0047"),u=Object(a["a"])({components:c,directives:i});function s(e,t,r,a,c,i){var u=Object(n["D"])("RfidReader"),s=Object(n["D"])("v-main"),o=Object(n["D"])("v-app");return Object(n["y"])(),Object(n["i"])(o,null,{default:Object(n["Q"])((function(){return[Object(n["m"])(s,null,{default:Object(n["Q"])((function(){return[Object(n["m"])(u)]})),_:1})]})),_:1})}var o=Object(n["k"])("h1",null,"RFID",-1),l=Object(n["k"])("p",null,"Connect to an LF RFID reader",-1),h=Object(n["l"])("mdi-serial-port"),f=Object(n["l"])(" Connect serial "),b=Object(n["l"])("mdi-usb"),d=Object(n["l"])(" Connect USB "),v=Object(n["l"])("Disconnect"),p={class:"text-h4 font-weight-bold"},w=Object(n["l"])(" Read tag "),O=Object(n["l"])(" Write tag "),m=Object(n["k"])("br",null,null,-1),g=Object(n["k"])("br",null,null,-1),j={class:"text-12"};function x(e,t,r,a,c,i){var u=Object(n["D"])("v-icon"),s=Object(n["D"])("v-btn"),x=Object(n["D"])("v-col"),k=Object(n["D"])("v-row"),y=Object(n["D"])("v-container");return Object(n["y"])(),Object(n["i"])(y,null,{default:Object(n["Q"])((function(){return[Object(n["m"])(k,{class:"text-center"},{default:Object(n["Q"])((function(){return[Object(n["m"])(x,{cols:"12"},{default:Object(n["Q"])((function(){return[o,l,!e.connected&&e.webSerialSupported?(Object(n["y"])(),Object(n["i"])(s,{key:0,class:"ma-2",onClick:e.connectSerial},{default:Object(n["Q"])((function(){return[Object(n["m"])(u,{left:""},{default:Object(n["Q"])((function(){return[h]})),_:1}),f]})),_:1},8,["onClick"])):Object(n["j"])("",!0),!e.connected&&e.webUsbSupported?(Object(n["y"])(),Object(n["i"])(s,{key:1,class:"ma-2",onClick:e.connectUsb},{default:Object(n["Q"])((function(){return[Object(n["m"])(u,{left:""},{default:Object(n["Q"])((function(){return[b]})),_:1}),d]})),_:1},8,["onClick"])):Object(n["j"])("",!0),e.connected?(Object(n["y"])(),Object(n["i"])(s,{key:2,class:"ma-2",onClick:e.disconnect},{default:Object(n["Q"])((function(){return[v]})),_:1},8,["onClick"])):Object(n["j"])("",!0)]})),_:1})]})),_:1}),Object(n["m"])(k,{class:"text-center"},{default:Object(n["Q"])((function(){return[Object(n["m"])(x,{cols:"12"},{default:Object(n["Q"])((function(){return[Object(n["k"])("p",p,Object(n["H"])(e.tag),1)]})),_:1})]})),_:1}),Object(n["m"])(k,{class:"text-center"},{default:Object(n["Q"])((function(){return[Object(n["m"])(x,{cols:"12"},{default:Object(n["Q"])((function(){return[Object(n["m"])(s,{class:"ma-2",onClick:e.readTag,disabled:!e.connected},{default:Object(n["Q"])((function(){return[w]})),_:1},8,["onClick","disabled"]),Object(n["m"])(s,{class:"ma-2",onClick:e.writeTag,disabled:!e.connected},{default:Object(n["Q"])((function(){return[O]})),_:1},8,["onClick","disabled"]),m,Object(n["m"])(s,{class:"ma-2",onClick:e.toggleSound},{default:Object(n["Q"])((function(){return[Object(n["m"])(u,null,{default:Object(n["Q"])((function(){return[Object(n["l"])(Object(n["H"])(e.soundIcon),1)]})),_:1})]})),_:1},8,["onClick"]),g,Object(n["k"])("p",j,Object(n["H"])(e.snackbarText),1)]})),_:1})]})),_:1})]})),_:1})}var k,y,R=r("1da1"),_=(r("b0c0"),r("96cf"),r("d4ec")),E=r("bee2"),C=(r("d3b7"),r("25f0"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),function(){function e(t,r){Object(_["a"])(this,e),this.device_=t,this.onError_=r}return Object(E["a"])(e,[{key:"write",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.device_.send(t);case 3:n=e.sent,"ok"!==n.status&&(r.error(n.status),this.onError_()),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),r.error(e.t0.toString()),this.onError_();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}()),D=function(){function e(t,r){Object(_["a"])(this,e),this.device_=t,this.onError_=r}return Object(E["a"])(e,[{key:"pull",value:function(e){var t=this;Object(R["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.device_.read(255);case 3:a=r.sent,"ok"!==a.status&&(e.error("USB error: ".concat(a.status)),t.onError_()),null!==(n=a.data)&&void 0!==n&&n.buffer&&(c=new Uint8Array(a.data.buffer,a.data.byteOffset,a.data.byteLength),e.enqueue(c)),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),e.error(r.t0.toString()),t.onError_();case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}]),e}(),T=function(){function e(t){Object(_["a"])(this,e),this.readable_=null,this.writable_=null,this.device_=t}return Object(E["a"])(e,[{key:"readable",get:function(){var e=this;return!this.readable_&&this.device_.opened&&(this.readable_=new ReadableStream(new D(this,(function(){e.readable_=null})))),this.readable_}},{key:"writable",get:function(){var e=this;return!this.writable_&&this.device_.opened&&(this.writable_=new WritableStream(new C(this,(function(){e.writable_=null})))),this.writable_}},{key:"open",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.baudRate,n=void 0===r?38400:r,e.next=3,this.device_.open();case 3:return e.next=5,this.device_.selectConfiguration(1);case 5:if(void 0!==this.device_.configuration){e.next=7;break}throw new Error("error");case 7:return e.next=9,this.device_.claimInterface(this.device_.configuration.interfaces[0].interfaceNumber);case 9:return e.next=11,this.vendorRead(33924,0);case 11:return e.next=13,this.vendorWrite(1028,0);case 13:return e.next=15,this.vendorRead(33924,0);case 15:return e.next=17,this.vendorRead(33667,0);case 17:return e.next=19,this.vendorRead(33924,0);case 19:return e.next=21,this.vendorWrite(1028,1);case 21:return e.next=23,this.vendorRead(33924,0);case 23:return e.next=25,this.vendorRead(33667,0);case 25:return e.next=27,this.vendorWrite(0,1);case 27:return e.next=29,this.vendorWrite(1,0);case 29:return e.next=31,this.vendorWrite(2,68);case 31:return e.next=33,this.setBaudRate(n);case 33:return e.next=35,this.vendorWrite(0,0);case 35:return e.next=37,this.vendorWrite(8,0);case 37:return e.next=39,this.vendorWrite(9,0);case 39:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setBaudRate",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.device_.controlTransferIn({recipient:"interface",requestType:"class",request:33,value:0,index:0},7);case 2:if(r=e.sent,void 0!==r.data){e.next=5;break}throw new Error("error");case 5:return n=new DataView(r.data.buffer),n.setInt32(0,t,!0),n.setInt8(4,0),n.setInt8(5,0),n.setInt8(6,8),e.next=12,this.device_.controlTransferOut({recipient:"interface",requestType:"class",request:32,value:0,index:0},n.buffer);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"vendorRead",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.device_.controlTransferIn({requestType:"vendor",recipient:"device",request:1,value:t,index:r},1));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"vendorWrite",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.device_.controlTransferOut({requestType:"vendor",recipient:"device",request:1,value:t,index:r}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:3,e.abrupt("return",this.device_.transferIn(r,t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:2,e.abrupt("return",this.device_.transferOut(r,t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.device_.close());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),S=r("2909"),I=(r("20bf"),r("99af"),r("262e")),L=r("2caf"),N=r("9072"),q=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n;return Object(_["a"])(this,r),n=t.call(this,e),n.name="RFIDError",n}return r}(Object(N["a"])(Error)),W=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n;return Object(_["a"])(this,r),n=t.call(this,e),n.name="IOError",n}return r}(q),P=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n;return Object(_["a"])(this,r),n=t.call(this,e),n.name="ChecksumError",n}return r}(q),Q=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n;return Object(_["a"])(this,r),n=t.call(this,e),n.name="TagError",n}return r}(q),U=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No tag present";return Object(_["a"])(this,r),e=t.call(this,n),e.name="NoTagError",e}return r}(Q),A=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error communicating with tag";return Object(_["a"])(this,r),e=t.call(this,n),e.name="CommTagError",e}return r}(Q),F=(r("fb6a"),r("cb29"),r("ac1f"),r("466d"),r("d81d"),r("4d90"),function e(t,r,n){Object(_["a"])(this,e),this.opCode=t,this.status=r,this.data=n}),M=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(_["a"])(this,e),this.requestData=new Uint8Array,this.name=t,this.opCode=new Uint8Array(r),this.requestData=new Uint8Array(n)}return Object(E["a"])(e,[{key:"frame",value:function(){var t=new Uint8Array(255);t.set(this.opCode);for(var r=2,n=0;n<this.requestData.length;n++){var a=this.requestData[n];t[r++]=a,170===a&&(t[r++]=170)}return t[r++]=e.checksum(t.slice(0,r)),t.slice(0,r)}}],[{key:"checksum",value:function(e){return e.reduce((function(e,t){return e^t}),0)}}]),e}(),G=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){return Object(_["a"])(this,r),t.call(this,"Model info",[1,2])}return r}(M),B=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(Object(_["a"])(this,r),e>255||e<0)throw new RangeError("Duration must be between 0 and 255. Was ".concat(e,"."));return t.call(this,"Beep",[1,3],[e])}return r}(M),K=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){return Object(_["a"])(this,r),t.call(this,"Set led color",[1,4],[e])}return r}(M),H=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){return Object(_["a"])(this,r),t.call(this,"Read tag",[1,12])}return r}(M),J=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e,n,a){var c,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(_["a"])(this,r);var u=i?1:0;return c=t.call(this,e,a,[u].concat(Object(S["a"])(n.tag()))),c.tag=n,c.locked=i,c}return r}(M),V=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(_["a"])(this,r),t.call(this,"Write tag 2",e,[2,12],n)}return r}(J),z=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(_["a"])(this,r),t.call(this,"Write tag 3",e,[3,12],n)}return r}(J),X=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){return Object(_["a"])(this,r),t.apply(this,arguments)}return Object(E["a"])(r,[{key:"transform",value:function(e,t){var r=e.slice(0,2),n=e[2],a=e.slice(3,-1);if(0!==e.reduce((function(e,t){return e^t}),0))throw new P("Got the wrong checksum");var c=new F(r,n,a);t.enqueue(c)}}]),r}(TransformStream),Y=function(e){Object(I["a"])(r,e);var t=Object(L["a"])(r);function r(){var e;return Object(_["a"])(this,r),e=t.apply(this,arguments),e.buffer=new Uint8Array(255),e.bufferPointer=0,e.currentDataLength=-1,e}return Object(E["a"])(r,[{key:"transform",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.buffer.set(t,this.bufferPointer),this.bufferPointer+=t.length,!(-1===this.currentDataLength&&this.bufferPointer>=4)){e.next=6;break}if(170===this.buffer[0]&&221===this.buffer[1]){e.next=5;break}throw new W("Message from reader does not start with [0xAA, 0xDD]. Got [".concat(this.buffer.slice(0,2)));case 5:this.currentDataLength=255*this.buffer[2]+this.buffer[3]+4;case 6:if(-1!==this.currentDataLength&&this.bufferPointer>=this.currentDataLength){n=[],a=4;while(a<this.currentDataLength)c=this.buffer[a++],n.push(c),170===c&&0===this.buffer[a]&&a++;r.enqueue(new Uint8Array(n)),this.buffer.set(this.buffer.slice(this.currentDataLength)),this.buffer.fill(0,this.currentDataLength),this.bufferPointer-=this.currentDataLength,this.currentDataLength=-1}case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"flush",value:function(e){e.enqueue(this.buffer.slice(0,this.bufferPointer))}}]),r}(TransformStream);TransformStream,TransformStream;(function(e){e[e["NONE"]=0]="NONE",e[e["RED"]=1]="RED",e[e["GREEN"]=2]="GREEN"})(k||(k={})),function(e){e[e["OK"]=0]="OK",e[e["NoToken"]=1]="NoToken",e[e["CommError"]=2]="CommError",e[e["CommError2"]=3]="CommError2"}(y||(y={}));r("a630"),r("3ca3");var Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0];if(Object(_["a"])(this,e),5!==t.length)throw new Q("Wrong tag length. Expected 5, got ".concat(t.length));this.data=Array.from(t)}return Object(E["a"])(e,[{key:"tag",value:function(){return this.data.slice()}},{key:"length",get:function(){return this.data.length}},{key:"equals",value:function(e){return e.length===this.length&&this.data.every((function(t,r){return t===e.data[r]}))}},{key:"toString",value:function(){return this.data.reduce((function(e,t){return"".concat(e," ").concat(t.toString(16).padStart(2,"0"))}),"")}}]),e}(),$=(r("159b"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(_["a"])(this,e),this.counter=0,this.waiting=[],this.max=t}return Object(E["a"])(e,[{key:"take",value:function(){if(this.waiting.length>0&&this.counter<this.max){this.counter+=1;var e=this.waiting.shift();e&&e.resolve()}}},{key:"acuire",value:function(){var e=this;if(this.counter<this.max){this.counter+=1;var t=new Promise((function(e){e()}));return t}return new Promise((function(t,r){e.waiting.push({resolve:t,err:r})}))}},{key:"release",value:function(){this.counter-=1,this.take()}},{key:"purge",value:function(){var e=this.waiting.length;return this.waiting.forEach((function(e){e.err("Task has been purged")})),this.counter=0,this.waiting=[],e}},{key:"with",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.acuire();case 2:return e.prev=2,e.abrupt("return",t());case 4:return e.prev=4,this.release(),e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[2,,4,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),ee=function(){function e(t){Object(_["a"])(this,e),this.connected_=!1,this.writable_=null,this.readable_=null,this.semaphore=new $(1),this.port=t}return Object(E["a"])(e,[{key:"connect",value:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.port.open({baudRate:e.baudRate});case 3:return t.next=5,this.validateReader();case 5:if(r=t.sent,!r){t.next=10;break}this.connected_=!0,t.next=11;break;case 10:throw new q("The reader is not the correct model.");case 11:t.next=19;break;case 13:if(t.prev=13,t.t0=t["catch"](0),!(t.t0 instanceof DOMException)){t.next=17;break}throw t.t0;case 17:console.error(t.t0),this.port.close();case 19:case"end":return t.stop()}}),t,this,[[0,13]])})));function r(){return t.apply(this,arguments)}return r}()},{key:"isConnected",get:function(){return this.connected_}},{key:"readable",get:function(){return!this.readable_&&this.port.readable&&(this.readable_=this.port.readable.pipeThrough(new TransformStream(new Y)).pipeThrough(new TransformStream(new X))),this.readable_}},{key:"writable",get:function(){return!this.writable_&&this.port.writable&&(this.writable_=this.port.writable),this.writable_}},{key:"disconnect",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.readable_){e.next=13;break}return e.prev=1,e.next=4,this.readable_.cancel("Disconnecting");case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e["catch"](1),!(e.t0 instanceof DOMException&&19===e.t0.code)){e.next=12;break}console.error(e.t0.message),e.next=13;break;case 12:throw e.t0;case 13:if(!this.writable_){e.next=22;break}return e.prev=14,e.next=17,this.writable_.abort("Disconnecting");case 17:e.next=22;break;case 19:e.prev=19,e.t1=e["catch"](14),console.error(e.t1);case 22:return e.next=24,this.port.close();case 24:this.connected_=!1;case 25:case"end":return e.stop()}}),e,this,[[1,6],[14,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setLedColor",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.writeFrame(new K(t));case 2:return r=e.sent,n=r.status,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"beep",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.writeFrame(new B(t));case 2:return r=e.sent,n=r.status,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"readTag",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],e.next=3,this.writeFrame(new H);case 3:r=e.sent,n=r.status,a=r.data,e.t0=n,e.next=e.t0===y.OK?9:e.t0===y.NoToken?15:21;break;case 9:return e.next=11,this.setLedColor(k.GREEN);case 11:if(!t){e.next=14;break}return e.next=14,this.beep(5);case 14:return e.abrupt("return",new Z(a));case 15:return e.next=17,this.setLedColor(k.RED);case 17:if(!t){e.next=20;break}return e.next=20,this.beep(20);case 20:throw new U;case 21:throw new A;case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"writeTag",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c,i,u=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],e.next=3,this.writeFrame(new V(t));case 3:if(c=e.sent,a=c.status,a===y.OK){e.next=7;break}throw new q("Error executing WriteTag2");case 7:return e.next=9,this.readTag(!1);case 9:if(n=e.sent,!n.equals(t)){e.next=18;break}return e.next=13,this.setLedColor(k.GREEN);case 13:if(!r){e.next=16;break}return e.next=16,this.beep(5);case 16:return setInterval((function(){return u.setLedColor(k.NONE)}),1e3),e.abrupt("return");case 18:return e.next=20,this.writeFrame(new z(t));case 20:if(i=e.sent,a=i.status,a===y.OK){e.next=24;break}throw new q("WriteTag3");case 24:return e.next=26,this.readTag(!1);case 26:if(n=e.sent,!n.equals(t)){e.next=35;break}return e.next=30,this.setLedColor(k.GREEN);case 30:if(!r){e.next=33;break}return e.next=33,this.beep(5);case 33:return setInterval((function(){return u.setLedColor(k.NONE)}),1e3),e.abrupt("return");case 35:return e.next=37,this.setLedColor(k.RED);case 37:if(!r){e.next=40;break}return e.next=40,this.beep(20);case 40:setInterval((function(){return u.setLedColor(k.NONE)}),1e3);case 41:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getModelInfo",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.writeFrame(new G);case 2:return t=e.sent,r=t.data,e.abrupt("return",(new TextDecoder).decode(r));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"writeRaw",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.writable){e.next=2;break}throw new q("Writer is null");case 2:return r=this.writable.getWriter(),e.next=5,r.ready;case 5:return e.prev=5,e.next=8,r.write(Uint8Array.from(t));case 8:return e.prev=8,r.releaseLock(),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[5,,8,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"readRaw",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.readable){e.next=2;break}throw new q("reader is null");case 2:return t=this.readable.getReader(),e.prev=3,e.next=6,t.read();case 6:if(r=e.sent,n=r.done,a=r.value,!n&&void 0!==a){e.next=11;break}throw new q("Reader returned undefined value");case 11:return e.abrupt("return",a);case 12:return e.prev=12,t.releaseLock(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"writeFrame",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.semaphore.with(Object(R["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.frame(),e.next=3,r.writeRaw(Uint8Array.from([170,221,0,n.length].concat(Object(S["a"])(n))));case 3:return e.next=5,r.readRaw();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"validateReader",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getModelInfo();case 2:return t=e.sent,e.abrupt("return","ID card reader & writer"===t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();ee.baudRate=38400,ee.productId=8963,ee.vendorId=1659;var te=Object(n["n"])({setup:function(){var e,t=Object(n["C"])("usb"in navigator),r=Object(n["C"])("serial"in navigator),a=Object(n["C"])(!1),c=Object(n["C"])(""),i=Object(n["C"])(!1),u=function(){i.value=!i.value},s=Object(n["g"])((function(){return i.value?"mdi-bell":"mdi-bell-off"})),o=Object(n["C"])(!1),l=Object(n["C"])(new Z),h=Object(n["g"])((function(){return o.value?"Connected":"Not connected"})),f=function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new ee(r),t.next=3,e.connect();case 3:o.value=e.isConnected;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.disconnect();case 2:o.value=!1;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.usb.requestDevice({filters:[{vendorId:ee.vendorId,productId:ee.productId}]});case 3:return t=e.sent,r=new T(t),e.next=7,f(r);case 7:e.next=19;break;case 9:if(e.prev=9,e.t0=e["catch"](0),8!==e.t0.code){e.next=14;break}return console.error(e.t0.message),e.abrupt("return");case 14:if(19!==e.t0.code){e.next=17;break}return console.error(e.t0.message),e.abrupt("return");case 17:throw console.error(e.t0.code,e.t0.name,e.t0.message),e.t0;case 19:navigator.usb.addEventListener("disconnect",b);case 20:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serial.requestPort({filters:[{usbVendorId:ee.vendorId,usbProductId:ee.productId}]});case 3:t=e.sent,f(t),t.addEventListener("disconnect",b),e.next=14;break;case 8:if(e.prev=8,e.t0=e["catch"](0),!(e.t0 instanceof DOMException&&8===e.t0.code)){e.next=13;break}return console.error(e.t0.message),e.abrupt("return");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.readTag(i.value);case 3:l.value=t.sent,a.value=!1,c.value="",t.next=15;break;case 8:if(t.prev=8,t.t0=t["catch"](0),!(t.t0 instanceof U)){t.next=14;break}return a.value=!0,c.value="No tag detected",t.abrupt("return");case 14:t.t0 instanceof A&&(a.value=!0,c.value="Tag communication error");case 15:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.writeTag(l.value,i.value);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{connectedString:h,connected:o,playSound:i,soundIcon:s,tag:l,webUsbSupported:t,webSerialSupported:r,snackbar:a,snackbarText:c,readTag:p,toggleSound:u,writeTag:w,connectSerial:v,connectUsb:d,disconnect:b}}});te.render=x;var re=te,ne=Object(n["n"])({name:"App",components:{RfidReader:re},data:function(){return{}}});ne.render=s;var ae=ne;Object(n["h"])(ae).use(u).mount("#app")}});
//# sourceMappingURL=app.5d1db672.js.map